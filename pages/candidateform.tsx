import type { NextPage } from 'next'
import Head from 'next/head'
import { useEffect } from 'react'
import Candidate from '../components/Candidate'
import CloneDemo from '../components/CloneDemo'
import getCombo from './api/combobox'
import { useStoreOption } from './lib/candidate'

export interface propsData{
    positionAppliedOption: positionAppliedData[] | undefined,
}

const CandidateForm: NextPage<propsData> = ({positionAppliedOption}) => {
    const { setPositionApplied } = useStoreOption()

    useEffect(() => {
        setPositionApplied(positionAppliedOption)
    }, [])

    return(
        <>
        <Head>
            <title>Form Candidate HRMS</title>
            <meta name="description" content="Generated by create next app" />
        </Head>
        <div className="p-10 min-h-screen bg-gray-200">
            <div className="bg-white shadow-md rounded-md">
                <Candidate />
            </div>
        </div>
        </>
    )
}

interface positionAppliedData{
    combo_key: number;
    combo_name: string;
}

CandidateForm.getInitialProps = async() => {
    const res = await getCombo("genre", 0)
    const positionAppliedOption: positionAppliedData[] | undefined = res.result
    
    return {positionAppliedOption: positionAppliedOption}
}

export default CandidateForm